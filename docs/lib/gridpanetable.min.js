var GridPaneTable={};GridPaneTable.DEFAULT_ROW_HEIGHT=0;GridPaneTable.WHITE_SPACE=" ";GridPaneTable.Service=function(){this.header=null;this.body=null;this.setHeader=function(e){this.header=e};this.getHeader=function(){return this.header};this.setBody=function(e){this.body=e};this.getBody=function(){return this.body};this.onScroll=function(e,t){var s=this.getHeader();var i=this.getBody();var n=s.getBoundingClientRect();var l=0-i.scrollLeft;s.style.left=l+"px";var r=e.getElementsByClassName("gridpanetable-cell-fixed");for(var a=0;a<r.length;a++){var o=r[a];if(t){o.style.transform="translate("+i.scrollLeft+"px)"}else{o.style.transform=""}}r=e.getElementsByClassName("gridpanetable-cell-fixed-right");for(var a=0;a<r.length;a++){var o=r[a];if(t){var h=i.scrollLeft;o.style.transform="translate("+h+"px)"}else{o.style.transform=""}}}};GridPaneTable.Cell=React.createClass({setElement:function(e){this.element=e},getCellClass:function(){var e="gridpanetable-cell";if(this.props.custom){e=e+" gridpanetable-cell-scroll";if(this.props.column.fixed){e=e+" gridpanetable-cell-fixed"}if(this.props.column.fixedRight){e=e+" gridpanetable-cell-fixed-right"}}return e},setStyles:function(){if(this.props.custom){this.element.style.width="";this.element.style.minWidth=this.props.column.width+"px";this.element.style.maxWidth=this.props.column.width+"px";if(!this.props.column.fixedRight){this.element.style.left=this.props.column.left+"px"}else{this.element.style.left="";if(this.props.cellType.toUpperCase()=="TH"){rect=this.element.getBoundingClientRect();this.element.style.width=rect.width+10+"px";this.element.style.maxWidth=rect.width+10+"px"}}}else{this.element.style.minWidth="";this.element.style.transform="";this.element.style.maxWidth="";var e=this.props.totalWidth*this.props.column.width/this.props.defaultTotalWidth;this.element.style.minWidth=e+"px"}if(this.props.height>0){this.element.style.height=this.props.height+"px"}},getCellContent:function(){if(this.props.cellType=="th"){return this.props.cellContent}else{var e={rowIndex:this.props.rowIndex,columnIndex:this.props.columnIndex,column:this.props.column,row:this.props.parentRow,cell:this.element};return this.props.cellContent(e)}},componentDidMount:function(){this.setStyles()},componentDidUpdate:function(){this.setStyles()},render:function(){return React.createElement(this.props.cellType,{ref:this.setElement,className:this.getCellClass()},this.getCellContent())}});GridPaneTable.Row=React.createClass({createColumns:function(){var e=[];for(var t=0;t<this.props.columns.length;t++){var s="col"+t;var i=this.props.columns[t];var n=null;cellType="";if(this.props.isHeader){n=GridPaneTable.WHITE_SPACE;if(i.displayName){n=i.displayName}else{n=i.referenceName}cellType="th"}else{n=i.cellContentGetter;cellType="td"}if(i.fixedRight&&i.display&&this.props.custom){var l={width:i.width,left:i.left,name:i.name,property:i.property,transparent:true};e.push(React.createElement(GridPaneTable.Cell,{key:s+"H",cellType:cellType,height:this.props.height,rowParent:this.element,columnIndex:t,rowIndex:this.props.rowIndex,cellContent:n,column:l,custom:this.props.custom,defaultTotalWidth:this.props.defaultWidth,totalWidth:this.props.width},null))}if(i.display){e.push(React.createElement(GridPaneTable.Cell,{key:s,cellType:cellType,height:this.props.height,rowParent:this.element,columnIndex:t,rowIndex:this.props.rowIndex,cellContent:n,column:i,custom:this.props.custom,defaultTotalWidth:this.props.defaultWidth,totalWidth:this.props.width},null))}}return e},setElement:function(e){this.element=e},setStyles:function(){if(this.props.height>0){this.element.style.height=this.props.height+"px"}if(this.props.custom){this.element.style.width=""}else{this.element.style.width="100%"}},componentDidMount:function(){this.setStyles()},componentDidUpdate:function(){this.setStyles()},render:function(){return React.createElement("tr",{ref:this.setElement,className:this.props.rowClass},this.createColumns())}});GridPaneTable.Body=React.createClass({getBodyClass:function(){var e="gridpanetable-body";if(this.state.custom){e+=" gridpanetable-body-scroll"}return e},getInitialState:function(){return{custom:true}},setVScroll:function(e){this.element=e;this.props.service.setBody(e)},createRows:function(e){var t=[];var s=0;var i=this.props.columns;var n=this.props.rowProps;for(var s=0;s<n.numRows;s++){var l=n.rowClass;if(n.evenClass&&n.evenClass!=null&&n.evenClass.length>0&&s%2==0){l=l+" "+n.evenClass}if(n.oddClass&&n.oddClass!=null&&n.oddClass.length>0&&s%2==1){l=l+" "+n.oddClass}t.push(React.createElement(GridPaneTable.Row,{columns:i,key:"row"+s,rowIndex:s,height:n.rowHeight,rowClass:l,custom:this.state.custom,defaultWidth:this.state.defaultWidth,width:this.state.width},null))}return t},componentDidMount:function(){if(this.props.height>0){this.element.style.height=this.props.height+"px"}},render:function(){return React.createElement("tbody",{ref:this.setVScroll,className:this.getBodyClass()},this.createRows(this.state.custom))}});GridPaneTable.Header=React.createClass({getInitialState:function(){return{custom:true}},setElement:function(e){this.element=e;this.props.service.setHeader(e)},getHeaderClass:function(){var e="gridpanetable-head";if(this.state.custom){e+=" gridpanetable-head-scroll"}return e},render:function(){return React.createElement("thead",{className:this.getHeaderClass(),ref:this.setElement},React.createElement(GridPaneTable.Row,{columns:this.props.columns,height:this.props.height,rowClass:this.props.headerClass,isHeader:true,custom:this.state.custom,defaultWidth:this.state.defaultWidth,width:this.state.width},null))}});GridPaneTable.ColumnOption=React.createClass({getDisplayName:function(){if(this.props.column.referenceName){return this.props.column.referenceName}else{return this.props.column.displayName}},getLabelClass:function(){var e="";if(this.props.column.noHide){e="gridpanetable-disabled"}return e},componentDidMount:function(){if(this.props.column.display){this.element.checked=true}},setElement:function(e){this.element=e},handleChange:function(){var e=this.element.checked;this.props.gpTable.updateColumn(this.props.columnIndex,e)},render:function(){return React.createElement("div",{className:"gridpanetable-option"},React.createElement("input",{type:"checkbox",ref:this.setElement,disabled:this.props.column.noHide,onChange:this.handleChange},null),GridPaneTable.WHITE_SPACE,React.createElement("span",{className:this.getLabelClass()},this.getDisplayName()))}});GridPaneTable.OptionsLink=React.createClass({getInitialState:function(){this.props.gpTable.optionsLink=this;return{optionsDisplayed:"none"}},showOptions:function(e,t){var s=this.state.optionsDisplayed;if(s=="none"){s="block"}else{s="none"}this.setState({optionsDisplayed:s,otionsRight:e.clientX,optionsTop:e.clientY})},moveOptions:function(e){var t=this.state.optionsDisplayed;if(this.state.optionsDisplayed=="block"){this.setState({optionsDisplayed:t,otionsRight:e,optionsTop:this.state.optionsTop})}},setOptionsDisplay:function(e){this.optionsDisplay=e},createColumnOptions:function(){var e=[];for(var t=0;t<this.props.columns.length;t++){var s=React.createElement(GridPaneTable.ColumnOption,{key:"colOpt"+t,column:this.props.columns[t],columnIndex:t,gpTable:this.props.gpTable},null);e.push(s)}return e},componentDidUpdate:function(){this.optionsDisplay.style.display=this.state.optionsDisplayed;var e=this.optionsDisplay.getBoundingClientRect();if(this.state.optionsDisplayed=="block"){this.optionsDisplay.style.left=this.state.otionsRight-e.width+"px"}},render:function(){return React.createElement("span",{},React.createElement("span",{onClick:this.showOptions,className:"gridpanetable-options-link"},"⚙"),React.createElement("div",{className:"gridpanetable-options",ref:this.setOptionsDisplay},this.createColumnOptions()))}});GridPaneTable.Caption=React.createClass({render:function(){return React.createElement("caption",{className:"gridpanetable-caption"},React.createElement("div",{className:"gridpanetable-caption-left"},GridPaneTable.WHITE_SPACE),React.createElement("div",{className:"gridpanetable-caption-center"},this.props.title),React.createElement("div",{className:"gridpanetable-caption-right"},React.createElement(GridPaneTable.OptionsLink,{columns:this.props.columns,gpTable:this.props.gpTable},null)))}});GridPaneTable.Table=React.createClass({getColumnPositions:function(){this.maxWidth=0;for(var e=0;e<this.columns.length;e++){var t=this.columns[e];t.left=this.maxWidth;if(t.display){this.maxWidth+=t.width}}this.colIndex=null;this.resize(this,this.element)},getInitialState:function(){this.service=new GridPaneTable.Service;this.maxHeight=this.props.rowHeight*this.props.numRows;this.columns=[];this.maxWidth=0;this.optionsLink=null;for(var e=0;e<this.props.columns.length;e++){var t=this.props.columns[e];var s={left:this.maxWidth,display:true};for(p in t){s[p]=t[p]}this.columns.push(s);if(s.display){this.maxWidth+=t.width}}return{custom:true}},setHeader:function(e){this.header=e},createRowProps:function(e){var t={};var s=0;t.numRows=this.props.numRows;t.rowHeight=GridPaneTable.DEFAULT_ROW_HEIGHT;if(this.props.rowHeight){t.rowHeight=this.props.rowHeight}t.rowClass="gridpanetable-row-default";var i=this.props;if(i.evenClass&&i.evenClass!=null&&i.evenClass.length>0){t.evenClass=i.evenClass}if(i.oddClass&&i.oddClass!=null&&i.oddClass.length>0){t.oddClass=i.oddClass}return t},setBody:function(e){this.body=e},createCaption:function(){if(this.props.caption){var e={title:GridPaneTable.WHITE_SPACE,gpTable:this,columns:this.columns};if(this.props.caption.title){e.title=this.props.caption.title}return React.createElement(GridPaneTable.Caption,e,null)}else{return null}},createHeader:function(){var e=GridPaneTable.DEFAULT_ROW_HEIGHT;var t="gridpanetable-header-default";if(this.props.headerRowHeight){e=this.props.headerRowHeight}if(this.props.headerClass&&this.props.headerClass!=null&&this.props.headerClass.length>0){t=this.props.headerClass}return React.createElement(GridPaneTable.Header,{columns:this.columns,service:this.service,height:e,headerClass:t,ref:this.setHeader},null)},setElement:function(e){this.element=e},componentWillUpdate:function(){if(this.colIndex!=null&&this.colIndex>-1){this.columns[this.colIndex].display=this.newDisplay;this.getColumnPositions()}},updateColumn:function(e,t){this.colIndex=e;this.newDisplay=t;this.setState({colIndex:e,newDisplay:t})},resize:function(e,t,s){e.header.setState({custom:true});e.body.setState({custom:true});var i=e.service.getBody();var n=e.service.getHeader();var l=e.maxWidth+15;if(e.props.minWidth&&e.props.minWidth!=null&&e.props.minWidth>0){e.element.style.width=e.props.minWidth+"px"}else{e.element.style.width=l+"px"}var r=e.element.parentElement.getBoundingClientRect();var a=true;var o=r.width;o=r.width-64;if(r.width>l){a=false;if(e.props.minWidth&&e.props.minWidth!=null&&e.props.minWidth>0){e.element.style.width=o+"px"}n.style.width=""}else{if(e.props.minWidth&&e.props.minWidth!=null&&e.props.minWidth>0){e.element.style.width=e.props.minWidth+"px";if(r.width>e.props.minWidth){e.element.style.width=r.width+"px"}}}if(e.props.tableHeight&&e.props.tableHeight!=null&&e.props.tableHeight>0){i.style.height=e.props.tableHeight-e.headerRowHeight+"px"}else{if(e.vertResizer){var h=e.element;var p=window.innerHeight;var c=p-(r.top+e.vertResizer.remainingHeight);if(c<e.vertResizer.minHeight){c=e.vertResizer.minHeight}i.style.height=c-e.headerRowHeight+"px"}}e.setState({custom:a});e.header.setState({custom:a,defaultWidth:e.maxWidth,width:o});e.body.setState({custom:a,defaultWidth:e.maxWidth,width:o});if(e.optionsLink&&e.optionsLink!=null){e.optionsLink.moveOptions(r.right-16)}e.service.onScroll(e.element,a)},render:function(){return React.createElement("table",{ref:this.setElement,className:"gridpanetable-table"},this.createCaption(),this.createHeader(),React.createElement(GridPaneTable.Body,{rowProps:this.createRowProps(),columns:this.columns,service:this.service,ref:this.setBody},null))},componentDidMount:function(){var e=this;var t=this.element;this.resizeMe=function(){e.resize(e,t,true)};this.scrollMe=function(){e.service.onScroll(e.element,e.state.custom)};window.addEventListener("resize",this.resizeMe);var s=this.service.getBody();this.headerRowHeight=25;if(this.props.caption){this.headerRowHeight=50}if(this.props.headerRowHeight&&this.props.headerRowHeight>0){this.headerRowHeight=this.props.headerRowHeight}if(this.props.tableHeight&&this.props.tableHeight!=null&&this.props.tableHeight>0){s.style.height=this.props.tableHeight-this.headerRowHeight+"px"}else{if(this.props.verticalResizer&&this.props.verticalResizer!=null){this.vertResizer=this.props.verticalResizer}}s.addEventListener("scroll",this.scrollMe);this.resizeMe()},conponentWillUnmount:function(){window.removeEventListener("resize",this.resizeMe)}});